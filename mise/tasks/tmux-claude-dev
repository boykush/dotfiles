#!/bin/bash
#MISE description="Start tmux with Claude Code + helix preview pane"
#MISE dir="{{cwd}}"

SESSION_NAME="claude-dev"

# Kill existing session if it exists
tmux kill-session -t "$SESSION_NAME" 2>/dev/null || true

# Create new tmux session with claude in the first pane
tmux new-session -d -s "$SESSION_NAME" -c "$(pwd)" "claude"

# Split and open helix in the right pane (upper)
tmux split-window -h -t "$SESSION_NAME" -c "$(pwd)" "hx"

# Split right pane vertically for gitui (lower)
tmux split-window -v -t "$SESSION_NAME":0.1 -c "$(pwd)" "gitui"

# Focus the left pane (claude)
tmux select-pane -t "$SESSION_NAME":0.0

# Attach to the session
tmux attach-session -t "$SESSION_NAME"
